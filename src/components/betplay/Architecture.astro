---
import { Icon } from 'astro-icon/components';

// Datos de la arquitectura
const architecture = [
  {
    title: 'Frontend',
    description: 'Plataforma de usuario final con Angular, optimizada para rendimiento y experiencia de usuario.',
    features: [
      'Angular 12+ con TypeScript',
      'Módulos lazy-loaded',
      'State Management con NgRx',
      'Diseño responsive con TailwindCSS',
      'WebSockets para actualizaciones en tiempo real'
    ],
    icon: 'lucide:monitor',
    color: 'from-blue-500 to-cyan-400'
  },
  {
    title: 'Backend',
    description: 'Arquitectura de microservicios escalable y mantenible con NestJS.',
    features: [
      'NestJS con TypeScript',
      'Arquitectura de microservicios',
      'Autenticación JWT',
      'API Gateway con GraphQL',
      'Mensajería con RabbitMQ'
    ],
    icon: 'lucide:server',
    color: 'from-purple-500 to-indigo-400'
  },
  {
    title: 'Infraestructura',
    description: 'Infraestructura escalable y segura en la nube con monitoreo continuo.',
    features: [
      'Docker y Kubernetes',
      'Bases de datos: PostgreSQL y MongoDB',
      'Caché con Redis',
      'CI/CD con GitHub Actions',
      'Monitoreo con Prometheus y Grafana'
    ],
    icon: 'lucide:database',
    color: 'from-green-500 to-emerald-400'
  }
];
---

<section id="architecture" class="py-16 md:py-24 relative overflow-hidden bg-gradient-to-br from-gray-50 to-white">
  <!-- Elementos decorativos -->
  <div class="absolute inset-0 opacity-5">
    <div class="absolute inset-0 bg-grid-gray-300 [mask-image:linear-gradient(0deg,white,transparent)]"></div>
  </div>
  
  <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-16">
      <span class="inline-block text-sm font-semibold text-cyan-500 uppercase tracking-wider mb-3">
        Arquitectura del Sistema
      </span>
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        Diseño Escalable y de Alto Rendimiento
      </h2>
      <div class="w-20 h-1 bg-gradient-to-r from-cyan-400 to-blue-500 mx-auto"></div>
    </div>

    <!-- Tarjetas de Arquitectura -->
    <div class="grid md:grid-cols-3 gap-8">
      {architecture.map((item, index) => (
        <div 
          class="architecture-card group relative bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 transition-all duration-300 hover:shadow-xl hover:-translate-y-1"
          data-aos="fade-up"
          data-aos-delay={index * 100}
        >
          <div class={`absolute top-0 left-0 w-full h-1 bg-gradient-to-r ${item.color}`}></div>
          
          <div class="p-6">
            <div class={`w-14 h-14 flex items-center justify-center rounded-xl mb-4 bg-gradient-to-br ${item.color} text-white`}>
              <Icon name={item.icon} class="w-7 h-7" />
            </div>
            
            <h3 class="text-xl font-bold text-gray-900 mb-2">{item.title}</h3>
            <p class="text-gray-600 mb-4">{item.description}</p>
            
            <ul class="space-y-2">
              {item.features.map(feature => (
                <li class="flex items-start">
                  <svg class="h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                  <span class="text-gray-700">{feature}</span>
                </li>
              ))}
            </ul>
          </div>
          
          <div class="px-6 py-4 bg-gray-50 border-t border-gray-100">
            <button class="text-sm font-medium text-cyan-600 hover:text-cyan-700 transition-colors duration-200 flex items-center group">
              Ver detalles
              <svg class="w-4 h-4 ml-1 transition-transform duration-200 group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </button>
          </div>
        </div>
      ))}
    </div>
    
    <!-- Diagrama de Arquitectura (simplificado) -->
    <div class="mt-16 bg-white rounded-xl shadow-lg p-6 border border-gray-100" data-aos="fade-up">
      <h3 class="text-xl font-bold text-gray-900 mb-6">Diagrama de la Arquitectura</h3>
      
      <div class="relative h-64 md:h-80 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg overflow-hidden flex items-center justify-center">
        <!-- Nodos del diagrama -->
        <div class="absolute left-1/4 top-1/4 w-24 h-24 rounded-full bg-gradient-to-br from-blue-500 to-cyan-400 flex items-center justify-center text-white font-bold shadow-lg">
          <span class="text-xs text-center px-2">Frontend<br>Angular</span>
        </div>
        
        <div class="absolute left-1/2 top-1/4 -translate-x-1/2 w-24 h-24 rounded-full bg-gradient-to-br from-purple-500 to-indigo-400 flex items-center justify-center text-white font-bold shadow-lg">
          <span class="text-xs text-center px-2">API<br>Gateway</span>
        </div>
        
        <div class="absolute right-1/4 top-1/4 w-24 h-24 rounded-full bg-gradient-to-br from-purple-500 to-indigo-400 flex items-center justify-center text-white font-bold shadow-lg">
          <span class="text-xs text-center px-2">Auth<br>Service</span>
        </div>
        
        <div class="absolute left-1/4 bottom-1/4 w-24 h-24 rounded-full bg-gradient-to-br from-purple-500 to-indigo-400 flex items-center justify-center text-white font-bold shadow-lg">
          <span class="text-xs text-center px-2">Core<br>Service</span>
        </div>
        
        <div class="absolute right-1/4 bottom-1/4 w-24 h-24 rounded-full bg-gradient-to-br from-green-500 to-emerald-400 flex items-center justify-center text-white font-bold shadow-lg">
          <span class="text-xs text-center px-2">Base de<br>Datos</span>
        </div>
        
        <!-- Líneas de conexión -->
        <svg class="absolute inset-0 w-full h-full" xmlns="http://www.w3.org/2000/svg">
          <line x1="25%" y1="25%" x2="50%" y2="25%" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4 2" />
          <line x1="50%" y1="25%" x2="75%" y2="25%" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4 2" />
          <line x1="25%" y1="25%" x2="25%" y2="75%" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4 2" />
          <line x1="25%" y1="75%" x2="50%" y2="75%" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4 2" />
          <line x1="75%" y1="25%" x2="75%" y2="75%" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4 2" />
          <line x1="50%" y1="75%" x2="75%" y2="75%" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4 2" />
        </svg>
      </div>
      
      <div class="mt-6 text-center">
        <p class="text-gray-600 text-sm">
          Arquitectura escalable basada en microservicios con separación clara de responsabilidades
        </p>
      </div>
    </div>
  </div>
  
  <script>
    // Animación para las tarjetas de arquitectura
    document.addEventListener('DOMContentLoaded', () => {
      const cards = document.querySelectorAll('.architecture-card');
      
      cards.forEach((card, index) => {
        gsap.fromTo(
          card,
          { y: 30, opacity: 0 },
          {
            y: 0,
            opacity: 1,
            duration: 0.6,
            delay: index * 0.1,
            ease: 'back.out(1.4)',
            scrollTrigger: {
              trigger: card,
              start: 'top 85%',
              toggleActions: 'play none none none'
            }
          }
        );
      });
    });
  </script>
  
  <style>
    .architecture-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .architecture-card {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
  </style>
</section>
